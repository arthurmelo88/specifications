[summary]
id:			CR-000001

date_raised:	27/02/2003

raised_by:		Zar Zar Tun

title:		Review of Data Types specification

owner:

status:		completed

[change information]
change_category:	Change

analyst:

problem_description: There should be more consistency in the UML class diagrams 
		for each package. For example, attributes were shown for some classes, 
		and not for others.
		  There are also inconsistencies between the UML class diagrams and the 
		class descriptions.
		  There are no class descriptions for DV_CUSTOMARY_QUANTITY and 
		DV_GENERAL_TIME_SPECIFICATION. Although, there may not be much to those 
		classes, class descriptions should also be provided for consistency.
		  There are a few errors in the labelling of headers in class descriptions. 
		  There should be more consistency in the presentation of the class 
		descriptions.
		  Fix errors in the invariants.

change_description:	
		Fix UML inconsistencies-
			-Figure 2 (p. 14): Attributes are not provided in this diagram.
			-Figure 4 (p. 18): The class diagram for DV_TEXT does not have 
			 an occurrence indicator, e.g. [1], for 'value' attribute. 
			-Figure 7 (p. 32): The occurrence indicator for 'lower' and 
			 'upper' attributes of DV_INTERVAL is ambiguous.
			-Figure 7 (p. 32): There are no attributes in the UML diagram for 
		 	 DV_TIME, DV_DATE, DV_DATE_TIME, DV_PARTIAL_TIME, and DV_PARTIAL_DATE.
			-Figure 8 (p. 55): Attributes are not provided in this diagram.
			-Figure 9 (p. 60): Attributes are not provided in this diagram.
			-Figure 10 (p. 65): The functions in DV_URI and DV_EHR_URI are 
			 displayed in their class diagrams, but they are not for other 
			 classes.
		Fix inconsistencies between the UML class diagrams and the class 
		descriptions.
			-Figure 4 (p. 18): The UML class diagram for TERM_MAPPING has 
			 the occurrence of 'target' as 1, but the class description doesn't 
			 have any invariant to enforce this. (I've followed the UML diagram 
			 in the schema.)
			-Figure 4 (p. 18): In DV_CODED_TEXT, 'terminology_id' is an attribute 
			 in the UML diagram, but it is a function in the class description.
			-Figure 4 (p. 18): In TERM_REFERENCE, 'relationship' attribute in UML 
			 diagram is called 'meaning' attribute in class description. (I've 
			 named in 'meaning' in the schema.)
			-Figure 7 (p. 32): There is no 'meaning' attribute in the UML diagram 
			 for REFERENCE_RANGE.
			-Figure 7 (p. 32): There are no 'value', 'rubric', and 'type' attributes 
			 in the UML diagram for DV_ORDINAL.
			-Figure 7 (p. 32): There are no 'units', 'accuracy_is_percent', and 
			 'property' attributes in the UML diagram for DV_QUANTIFIED.
			-Figure 7 (p. 32): There is no 'precision' attribute in the UML diagram 
			 for DV_QUANTITY.
			-Figure 10 (p. 65): In the UML diagram, 'type' attribute in DV_LINK is 
			 a DV_TEXT, but in the class description, it's a string.
			-Figure 10 (p. 65): In DV_LINK, 'ehr_id', 'transaction_id', 'organiser_id', 
			 and 'entry_id' are attributes in the UML diagram, but they are functions 
			 in the class description.
		Add class descriptions for DV_CUSTOMARY_QUANTITY and DV_GENERAL_TIME_SPECIFICATION.
		  Fix headers in class descriptions. The following applies to the first column 
		of the class description.
			-In DV_TEXT, "Attribute" should be "Attributes".
			-In DV_ORDERED, "Abstract" should be "Functions".
			-In REFERENCE_RANGE, the first "Functions" should be "Attributes".
			-In DV_QUANTIFIED, "Abstract" should be "Attributes".
			-In NUMERIC, "Abstract" should be "Functions".
			-In DV_WORLD_TIME, DV_DATE, DV_TIME, DV_DATE_TIME, DV_DURATION, 
			 DV_TIME_SPECIFICATION, DV_ENCAPSULATED, DV_MULTIMEDIA, DV_PARSABLE, 
			 DV_PHYSICAL_DATA, DV_LINK, DV_URI, and DV_EHR_URI, "Invariant" should 
			 be "Invariants".
		  Fix inconsistencies in the presentation of the class descriptions:
			-"Invariants" row should not be displayed if it is empty, since other 
			 rows do not appear if they are empty. Applicable for DATA_VALUE, 
			 TERM_MAPPING, DV_PLAIN_TEXT, DV_PARTIAL_DATE, DV_PARTIAL_TIME, 
			 and DV_PERIODIC_TIME_SPECIFICATION.
			-In DV_QUANTIFIED and DV_PERIODIC_TIME_SPECIFICATION, the "GEHR" Mapping 
			 row should not be there. In other places, if the mapping was not 
			 applicable, it was absent from the class description.
			-In DV_ENCAPSULATED, the "CEN" Mapping row should not be there for same 
		 	 reason as above.
			-Some invariant names, e.g. 'language_terminology', are capitalised, and 
			 some are not.
			-For 'property' attribute of DV_QUANTIFIED, a string is used to fix the 
			 terminology ID, but elsewhere, a constant is used.
		  There were a few errors in the invariants.
			-In DV_ORDINAL class description, the 'Type_exists' invariant should be 
			 "type.is_empty", rather than "type.empty".
			-In DV_ENCAPSULATED, the 'Not_empty' invariant should be: "is_external 
			 or is_inline".
			-In DV_ENCAPSULATED, the 'language_terminology' invariants should be: 
			 "language /= Void implies language.terminology_id.value.is_equal 
			 (Terminology_id_ISO_639)
			-Ditto for 'charset_terminology' invariant in DV_ENCAPSULATED and 
			 'Media_type_terminology', 'Compression_algorithm_terminology', and 
			 'Integrity_check_algorithm_terminology' invariants in DV_MULTIMEDIA.
			-In DV_MULTIMEDIA, there is no 'Terminology_id_HL7_CompressionAlgorithm' 
			 constant referred to in 'Compression_algorithm_terminology' invariant.
			-In DV_LINK, the 'meaning_exists' invariant should be "meaning /= Void" 
			 since it became a DV_TEXT.
		  Other-
			-In the units syntax of DV_QUANTIFIED, why are some of production names 
			 in uppercase and others in lowercase? Also, the SUFFIX production rule 
			 doesn't seem to be used.
			-The GEHR equivalent of TERM_REFERENCE should be G1_TERM_REF, rather than 
			 G1_CODED_TEXT.
			-In REFERENCE_RANGE, wouldn't the invariant, Range_is_simple: 
			 range.lower.is_simple and range.upper.is_simple, imply that 'lower' and 
			 'upper' values must be provided in 'range' field of a REFERENCE_RANGE?
			-Is there a BNF grammar for the HL7 syntax for time specification? I can't 
			 understand the syntax specification.

impact_analysis:	Changes to Documentation and XML schemas.

changed_components:	RM.DATA_TYPES 1.5.2

authorised_by:
implementor:

[test and release]
target_release:		0.9
test_release:
test_status:

[closure]
date_closed:		01/06/2003
reason_for_rejection:
notes:

